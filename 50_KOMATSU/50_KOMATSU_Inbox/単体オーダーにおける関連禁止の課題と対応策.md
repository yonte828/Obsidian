# [[単体オーダー]]における[[関連禁止]]の課題と対応策

## 1. 課題

現在、「[[単体オーダー]]」の際に「[[関連禁止]]」の機能が動作しないという問題がある。

## 2. 対応策の検討

この問題に対し、以下の2つの対応策が考えられる。

### ① 単体[[販売コード]]も含めて[[関連禁止]]を適用する

**内容:**
単体[[販売コード]]に対しても、[[車体オーダー]]と同様に[[関連禁止]]ルールを適用する。

**想定されるケース:**
[[販売コード]]A（車体）が[[販売コード]]B（車体/単体）を必須とする場合、A（車体）とB（単体）のオーダーでは、[[関連禁止]]「A必須B」は適用されない（引っかからない）。
しかし、もしBが[[車体オーダー]]でAに付かないCと同じ分類に属する場合、A（車体）とB（単体）のオーダーは通ってしまう可能性がある。

**メリット:**
[[PSM]]（Product Structure Management）や[[コンフィグレーター]]は、すべての[[販売コード]]をそのまま渡すだけで済むため、システムがシンプルになる。

**デメリット:**
[[CPQ]]（Configure, Price, Quote）側で[[単体オーダー]]を許可する対応をする場合、[[コンフィグレーター]]がエラーを返しても、「このケースは単体[[販売コード]]だからアラートでOK」「このケースはオーダー不可」といった複雑な切り分けロジックが必要になる。

### ② 単体[[販売コード]]は[[関連禁止]]を無視する

**内容:**
単体[[販売コード]]に対しては、[[関連禁止]]ルールを適用しない（無視する）。

**想定されるケース:**
[[販売コード]]A（車体）が[[販売コード]]B（車体/単体）を必須とする場合、A（車体）とB（単体）のオーダーでは、[[関連禁止]]「A必須B」に引っかかる。
これにより、Bを別枠で[[単体オーダー]]したい場合に、[[関連禁止]]に阻まれてオーダーできなくなる可能性がある。ただし、このようなケースは現状存在しないと見られる。

**メリット:**
システム的な対応が少なく済む。

**デメリット:**
設計側からの「単体にも[[関連禁止]]をつけたい」という要望に対しては、オーダー時の注意事項などで代替してもらう必要がある。

## 3. 結論（2025/10/22 [[作田]]さんとの議論より）

システム的な対応が少ないという点で、**②の「単体[[販売コード]]は[[関連禁止]]を無視する」**方が現実的である。設計側の要望については、オーダー時の注意事項で対応する方向で進める。

#単体オーダー #関連禁止 #課題 #対応策 #コマツ
